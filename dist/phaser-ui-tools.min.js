/*! phaser-ui-tools 2017-06-04 */

var Phaser,uiWidgets=uiWidgets||{};uiWidgets.textSprite=function(t,i,s,e,a,h){"use strict";Phaser.Sprite.call(this,t,a,h,i),t.add.existing(this),this.text=this.game.add.text(0,0,s,e),this.text.anchor.set(.5,.5),this.addChild(this.text)},uiWidgets.textSprite.prototype=Object.create(Phaser.Sprite.prototype),uiWidgets.textSprite.constructor=uiWidgets.textSprite,uiWidgets.textButton=function(t,i,s,e,a,h,r,n){"use strict";Phaser.Button.call(this,t,a,h,i,r,n),t.add.existing(this),this.text=this.game.add.text(0,0,s,e),this.text.anchor.set(.5,.5),this.addChild(this.text)},uiWidgets.textButton.prototype=Object.create(Phaser.Button.prototype),uiWidgets.textButton.constructor=uiWidgets.textButton;var Phaser;(uiWidgets=uiWidgets||{}).Column=function(t,i){"use strict";Phaser.Group.call(this,t),t.add.existing(this),this.game=t,this.context=i},uiWidgets.Column.prototype=Object.create(Phaser.Group.prototype),uiWidgets.Column.constructor=uiWidgets.Column,uiWidgets.Column.prototype.addNode=function(t){"use strict";this.add(t);var i=this.children[this.children.length-2];void 0!==i&&t.alignTo(i,Phaser.BOTTOM_CENTER)};var Phaser;(uiWidgets=uiWidgets||{}).Row=function(t,i){"use strict";Phaser.Group.call(this,t),t.add.existing(this),this.game=t,this.context=i},uiWidgets.Row.prototype=Object.create(Phaser.Group.prototype),uiWidgets.Row.constructor=uiWidgets.Row,uiWidgets.Row.prototype.addNode=function(t){"use strict";this.add(t);var i=this.children[this.children.length-2];void 0!==i&&t.alignTo(i,Phaser.RIGHT_CENTER)};var Phaser;(uiWidgets=uiWidgets||{}).ValueRange=function(t,i,s){"use strict";this.step=t,this.minValue=i,this.maxValue=s,this.ratio=t/s,this.ratio>1&&(this.ratio=1)},uiWidgets.Scrollbar=function(t,i,s,e,a,h,r,n,o){"use strict";this.game=t,this.content=i,this.vertical=e||!1,this.draggable=s||!1,(a=a||!1)&&this.enableKeyboard(),this.trackImage=h,this.barImage=r,n=n||0,this.vertical?(this.x=this.content.x+this.content.width+n,this.y=this.content.y):(this.x=this.content.x,this.y=this.content.y+this.content.height+n),this.minBarSize=44,this.tweenParams=o||{duration:300,ease:Phaser.Easing.Quadratic.Out},this.trackClicked=!1,this.barMoving=!1,this.mousePointer=null,this.create()},uiWidgets.Scrollbar.prototype={enableKeyboard:function(){"use strict";this.upKey=this.game.input.keyboard.addKey(Phaser.Keyboard.UP),this.downKey=this.game.input.keyboard.addKey(Phaser.Keyboard.DOWN),this.leftKey=this.game.input.keyboard.addKey(Phaser.Keyboard.LEFT),this.rightKey=this.game.input.keyboard.addKey(Phaser.Keyboard.RIGHT),this.vertical?(this.upKey.onDown.add(this.scrollUp,this),this.downKey.onDown.add(this.scrollDown,this),this.leftKey.onDown.add(this.scrollUp,this),this.rightKey.onDown.add(this.scrollDown,this)):(this.upKey.onDown.add(this.scrollLeft,this),this.downKey.onDown.add(this.scrollRight,this),this.leftKey.onDown.add(this.scrollLeft,this),this.rightKey.onDown.add(this.scrollRight,this))},enableTrackClick:function(){"use strict";this.track.inputEnabled=!0,this.track.events.onInputDown.add(this.clickTrack,this)},create:function(){"use strict";this.track=this.game.add.sprite(this.x,this.y,this.trackImage),this.draggable&&this.enableTrackClick(),this.bar=this.game.add.button(this.track.x,this.track.y,this.barImage,this.moveContent,this,1,0);var t,i;t={barDefaultX:this.track.x+this.track.width/2-this.bar.width/2,barDefaultY:this.track.y,viewportSize:this.content.area.height,containerSize:this.content.height,barMaxSize:this.track.height},i={barDefaultX:this.track.x,barDefaultY:this.track.y+this.track.height/2-this.bar.height/2,viewportSize:this.content.area.width,containerSize:this.content.width,barMaxSize:this.track.width};var s;s=this.vertical?t:i,this.barDefaultX=s.barDefaultX,this.barDefaultY=s.barDefaultY,this.bar.x=this.barDefaultX,this.bar.y=this.barDefaultY,this.valueRange=new uiWidgets.ValueRange(s.viewportSize,s.barDefaultY,s.containerSize);var e=s.barMaxSize*this.valueRange.ratio;e<this.minBarSize&&(e=this.minBarSize),this.vertical?this.bar.height=e:this.bar.width=e,this.draggable&&(this.bar.inputEnabled=!0,this.bar.input.enableDrag(),this.bar.events.onInputDown.add(this.saveMousePosition,this),this.bar.events.onDragUpdate.add(this.moveContent,this),this.vertical?(this.bar.input.allowHorizontalDrag=!1,this.bar.input.boundsRect=new Phaser.Rectangle(this.track.x,this.track.y,this.track.x,this.track.height)):(this.bar.input.allowVerticalDrag=!1,this.bar.input.boundsRect=new Phaser.Rectangle(this.track.x,this.track.y,this.track.width,this.track.y))),this.windowScrollAreaSize=this.valueRange.maxValue-this.valueRange.step,this.vertical?this.trackScrollAreaSize=this.track.height-this.bar.height:this.trackScrollAreaSize=this.track.width-this.bar.width},resetPosition:function(){"use strict";this.bar.x=this.barDefaultX,this.bar.y=this.barDefaultY},_addScrollTween:function(t){"use strict";var i;i=this.game.add.tween(this.bar).to(t,this.tweenParams.duration,this.tweenParams.ease,!0),this.mousePointer={x:this.bar.x,y:this.bar.y},this.trackClicked=!0,i.onUpdateCallback(this.moveContent,this),i.onComplete.add(this.enableBarInput,this)},scrollUp:function(){"use strict";if(this.bar.y!==this.track.y&&!this.barMoving){var t=this.track.height*this.valueRange.ratio,i=this.bar.y-t,s=null;this.barMoving=!0,s=i<=this.track.y?this.track.y:this.bar.y-t,this._addScrollTween({y:s})}},scrollDown:function(){"use strict";if(this.bar.y+this.bar.height!==this.track.y+this.track.height&&!this.barMoving){var t=this.track.height*this.valueRange.ratio,i=this.bar.y+2*t,s=null;this.barMoving=!0,this.bar.inputEnabled=!1,s=i>=this.track.y+this.track.height?this.track.y+this.track.height-this.bar.height:this.bar.y+t,this._addScrollTween({y:s})}},scrollLeft:function(){"use strict";if(this.bar.x!==this.track.x&&!this.barMoving){var t=this.track.width*this.valueRange.ratio,i=this.bar.x-t,s=null;this.barMoving=!0,this.bar.inputEnabled=!1,s=i<=this.track.x?this.track.x:this.bar.x-t,this._addScrollTween({x:s})}},scrollRight:function(){"use strict";if(this.bar.x+this.bar.width!==this.track.x+this.track.width&&!this.barMoving){var t=this.track.width*this.valueRange.ratio,i=this.bar.x+2*t,s=null;this.barMoving=!0,this.bar.inputEnabled=!1,s=i>=this.track.x+this.track.width?this.track.x+this.track.width-this.bar.width:this.bar.x+t,this._addScrollTween({x:s})}},enableBarInput:function(){this.trackClicked=!1,this.barMoving=!1,this.bar.inputEnabled=!0},clickTrack:function(t,i){"use strict";this.vertical?this.game.input.mousePointer.y>this.bar.y+this.bar.height?this.scrollDown():this.game.input.mousePointer.y<this.bar.y+this.bar.height&&this.scrollUp():this.game.input.mousePointer.x>this.bar.x+this.bar.width?this.scrollRight():this.game.input.mousePointer.x<this.bar.x+this.bar.width&&this.scrollLeft()},saveMousePosition:function(t,i){"use strict";this.mousePointer={x:i.x,y:i.y}},getBarPosition:function(){"use strict";var t,i=(t=this.vertical?this.content.y-this.content.area.y:this.content.x-this.content.area.x)/this.windowScrollAreaSize;return this.trackScrollAreaSize*i},moveContent:function(){"use strict";var t,i,s,e=this.getBarPosition();t=this.vertical?this.mousePointer.y:this.mousePointer.x,s=this.trackClicked?{x:this.bar.x,y:this.bar.y}:{x:this.game.input.mousePointer.x,y:this.game.input.mousePointer.y},i=this.vertical?s.y:s.x,this.mousePointer=s;var a,h,r=e+(h=i<(a=this.vertical?this.track.height+this.track.y:this.track.width+this.track.x)?t-i:0);r>0?r=0:r<=-this.trackScrollAreaSize&&(r=-this.trackScrollAreaSize),this.vertical?this.bar.y<=this.track.y?r=0:this.bar.y+this.bar.height>=this.track.y+this.track.height&&(r=-this.trackScrollAreaSize):this.bar.x<=this.track.x?r=0:this.bar.x+this.bar.width>=this.track.x+this.track.width&&(r=-this.trackScrollAreaSize);var n=r/this.trackScrollAreaSize;isNaN(n)&&(n=0);var o=n*this.windowScrollAreaSize;this.vertical?this.content.y=o+this.content.area.y:this.content.x=o+this.content.area.x,this.content.disableOutOfBounds(this.content.children,this,this.vertical)}};var Phaser;(uiWidgets=uiWidgets||{}).Viewport=function(t,i,s,e,a){"use strict";Phaser.Group.call(this,t),t.add.existing(this),this.x=i,this.y=s,this.area={x:i,y:s,width:e,height:a},this.mask=this.game.add.graphics(this.area.x,this.area.y),this.mask.beginFill(255),this.mask.drawRect(0,0,e,a),this.mask.endFill()},uiWidgets.Viewport.prototype=Object.create(Phaser.Group.prototype),uiWidgets.Viewport.constructor=uiWidgets.Viewport,uiWidgets.Viewport.prototype.addNode=function(t){"use strict";this.add(t)},uiWidgets.Viewport.prototype.disableOutOfBounds=function(t,i,s){"use strict";var e,a,h,r;if(void 0!==t)for(var n=0;n<t.length;n++)(e=t[n]).inputEnabled=!0,r=e.world||e,s?(a=r.y,h=i.content.area.y):(a=r.x,h=i.content.area.x),a<h&&(e.inputEnabled=!1),this.disableOutOfBounds(e.children,i,s)};