/*! phaser-ui-tools 2017-05-25 */
var Phaser,uiWidgets=uiWidgets||{};uiWidgets.textSprite=function(a,b,c,d,e){"use strict";Phaser.Sprite.call(this,a,d,e,b),a.add.existing(this);var f={font:"18px vcr_osd_monoregular",fill:"#fff",align:"center"};this.text=this.game.add.text(0,0,c,f),this.text.anchor.set(.5,.5),this.addChild(this.text)},uiWidgets.textSprite.prototype=Object.create(Phaser.Sprite.prototype),uiWidgets.textSprite.constructor=uiWidgets.textSprite,uiWidgets.textButton=function(a,b,c,d,e,f,g){"use strict";Phaser.Button.call(this,a,d,e,b,f,g),a.add.existing(this);var h={font:"18px vcr_osd_monoregular",fill:"#fff",align:"center"};this.text=this.game.add.text(0,0,c,h),this.text.anchor.set(.5,.5),this.addChild(this.text)},uiWidgets.textButton.prototype=Object.create(Phaser.Button.prototype),uiWidgets.textButton.constructor=uiWidgets.textButton;var Phaser,uiWidgets=uiWidgets||{};uiWidgets.Column=function(a,b){"use strict";Phaser.Group.call(this,a),a.add.existing(this),this.game=a,this.context=b},uiWidgets.Column.prototype=Object.create(Phaser.Group.prototype),uiWidgets.Column.constructor=uiWidgets.Column,uiWidgets.Column.prototype.addNode=function(a){"use strict";this.add(a);var b=this.children[this.children.length-2];void 0!==b&&a.alignTo(b,Phaser.BOTTOM_CENTER)};var Phaser,uiWidgets=uiWidgets||{};uiWidgets.Row=function(a,b){"use strict";Phaser.Group.call(this,a),a.add.existing(this),this.game=a,this.context=b},uiWidgets.Row.prototype=Object.create(Phaser.Group.prototype),uiWidgets.Row.constructor=uiWidgets.Row,uiWidgets.Row.prototype.addNode=function(a){"use strict";this.add(a);var b=this.children[this.children.length-2];void 0!==b&&a.alignTo(b,Phaser.RIGHT_CENTER)};var Phaser,uiWidgets=uiWidgets||{};uiWidgets.Scrollbar=function(a,b,c,d,e,f,g){"use strict";this.game=a,this.content=b,this.vertical=d||!1,this.draggable=c||!1,e=e||!1,e&&this.enableKeyboard(),this.trackImage=f,this.barImage=g;var h=10;this.vertical?(this.x=this.content.x+this.content.width+h,this.y=this.content.y):(this.x=this.content.x,this.y=this.content.y+this.content.height+h),this.minBarSize=44,this.tweenTiming=300,this.tweenEasing=Phaser.Easing.Quadratic.Out,this.trackClicked=!1,this.barMoving=!1,this.mousePointer=null,this.create()},uiWidgets.Scrollbar.prototype={enableKeyboard:function(){"use strict";this.upKey=this.game.input.keyboard.addKey(Phaser.Keyboard.UP),this.downKey=this.game.input.keyboard.addKey(Phaser.Keyboard.DOWN),this.leftKey=this.game.input.keyboard.addKey(Phaser.Keyboard.LEFT),this.rightKey=this.game.input.keyboard.addKey(Phaser.Keyboard.RIGHT),this.vertical?(this.upKey.onDown.add(this.scrollUp,this),this.downKey.onDown.add(this.scrollDown,this),this.leftKey.onDown.add(this.scrollUp,this),this.rightKey.onDown.add(this.scrollDown,this)):(this.upKey.onDown.add(this.scrollLeft,this),this.downKey.onDown.add(this.scrollRight,this),this.leftKey.onDown.add(this.scrollLeft,this),this.rightKey.onDown.add(this.scrollRight,this))},enableTrackClick:function(){"use strict";this.track.inputEnabled=!0,this.track.events.onInputDown.add(this.clickTrack,this)},create:function(){"use strict";this.track=this.game.add.sprite(this.x,this.y,this.trackImage),this.draggable&&this.enableTrackClick(),this.bar=this.game.add.button(this.track.x,this.track.y,this.barImage,this.moveContent,this,1,0);var a,b={barDefaultX:this.track.x+this.track.width/2-this.bar.width/2,barDefaultY:this.track.y,viewportSize:this.content.area.height,containerSize:this.content.height,barMaxSize:this.track.height},c={barDefaultX:this.track.x,barDefaultY:this.track.y+this.track.height/2-this.bar.height/2,viewportSize:this.content.area.width,containerSize:this.content.width,barMaxSize:this.track.width};a=this.vertical?b:c,this.barDefaultX=a.barDefaultX,this.barDefaultY=a.barDefaultY,this.bar.x=this.barDefaultX,this.bar.y=this.barDefaultY;var d=a.viewportSize/a.containerSize;d>1&&(d=1);var e=a.barMaxSize*d;e<this.minBarSize&&(e=this.minBarSize),this.vertical?this.bar.height=e:this.bar.width=e,this.draggable&&(this.bar.inputEnabled=!0,this.bar.input.enableDrag(),this.bar.events.onInputDown.add(this.saveMousePosition,this),this.bar.events.onDragUpdate.add(this.moveContent,this),this.vertical?(this.bar.input.allowHorizontalDrag=!1,this.bar.input.boundsRect=new Phaser.Rectangle(this.track.x,this.track.y,this.track.x,this.track.height)):(this.bar.input.allowVerticalDrag=!1,this.bar.input.boundsRect=new Phaser.Rectangle(this.track.x,this.track.y,this.track.width,this.track.y))),this.windowScrollAreaSize=a.containerSize-a.viewportSize,this.vertical?this.trackScrollAreaSize=this.track.height-this.bar.height:this.trackScrollAreaSize=this.track.width-this.bar.width},resetPosition:function(){"use strict";this.bar.x=this.barDefaultX,this.bar.y=this.barDefaultY},scrollUp:function(){"use strict";if(this.bar.y!==this.track.y&&!this.barMoving){var a=this.bar.y-this.bar.height,b=null;this.barMoving=!0,b=a<=this.track.y?this.track.y:this.bar.y-this.bar.height;var c=this.game.add.tween(this.bar).to({y:b},this.tweenTiming,this.tweenEasing,!0);this.mousePointer={x:this.bar.x,y:this.bar.y},this.trackClicked=!0,c.onUpdateCallback(this.moveContent,this),c.onComplete.add(this.enableBarInput,this)}},scrollDown:function(){"use strict";if(this.bar.y+this.bar.height!==this.track.y+this.track.height&&!this.barMoving){var a=this.bar.y+2*this.bar.height,b=null;this.barMoving=!0,this.bar.inputEnabled=!1,b=a>=this.track.y+this.track.height?this.track.y+this.track.height-this.bar.height:this.bar.y+this.bar.height;var c=this.game.add.tween(this.bar).to({y:b},this.tweenTiming,this.tweenEasing,!0);this.mousePointer={x:this.bar.x,y:this.bar.y},this.trackClicked=!0,c.onUpdateCallback(this.moveContent,this),c.onComplete.add(this.enableBarInput,this)}},scrollLeft:function(){"use strict";var a=this.bar.x-this.bar.width,b=null;b=a<=this.track.x?this.track.x:this.bar.x-this.bar.width;var c=this.game.add.tween(this.bar).to({x:b},this.tweenTiming,this.tweenEasing,!0);this.mousePointer={x:this.bar.x,y:this.bar.y},this.trackClicked=!0,c.onUpdateCallback(this.moveContent,this),c.onComplete.add(this.enableBarInput,this)},scrollRight:function(){"use strict";var a=this.bar.x+2*this.bar.width,b=null;b=a>=this.track.x+this.track.width?this.track.x+this.track.width-this.bar.width:this.bar.x+this.bar.width;var c=this.game.add.tween(this.bar).to({x:b},this.tweenTiming,this.tweenEasing,!0);this.mousePointer={x:this.bar.x,y:this.bar.y},this.trackClicked=!0,c.onUpdateCallback(this.moveContent,this),c.onComplete.add(this.enableBarInput,this)},enableBarInput:function(){this.trackClicked=!1,this.barMoving=!1,this.bar.inputEnabled=!0},clickTrack:function(a,b){"use strict";this.vertical?this.game.input.mousePointer.y>this.bar.y+this.bar.height?this.scrollDown():this.game.input.mousePointer.y<this.bar.y+this.bar.height&&this.scrollUp():this.game.input.mousePointer.x>this.bar.x+this.bar.width?this.scrollRight():this.game.input.mousePointer.x<this.bar.x+this.bar.width&&this.scrollLeft()},saveMousePosition:function(a,b){"use strict";this.mousePointer={x:b.x,y:b.y}},getBarPosition:function(){"use strict";var a;a=this.vertical?this.content.y-this.content.area.y:this.content.x-this.content.area.x;var b=a/this.windowScrollAreaSize;return this.trackScrollAreaSize*b},moveContent:function(){"use strict";var a,b,c,d=this.getBarPosition();a=this.vertical?this.mousePointer.y:this.mousePointer.x,c=this.trackClicked?{x:this.bar.x,y:this.bar.y}:{x:this.game.input.mousePointer.x,y:this.game.input.mousePointer.y},b=this.vertical?c.y:c.x,this.mousePointer=c;var e;e=this.vertical?this.track.height:this.track.width;var f;f=b<e?a-b:0;var g=d+f;g>0?g=0:g<=-this.trackScrollAreaSize&&(g=-this.trackScrollAreaSize),this.vertical?this.bar.y<=this.track.y?g=0:this.bar.y+this.bar.height>=this.track.y+this.track.height&&(g=-this.trackScrollAreaSize):this.bar.x<=this.track.x?g=0:this.bar.x+this.bar.width>=this.track.x+this.track.width&&(g=-this.trackScrollAreaSize);var h=g/this.trackScrollAreaSize;isNaN(h)&&(h=0);var i=h*this.windowScrollAreaSize;this.vertical?this.content.y=i+this.content.area.y:this.content.x=i+this.content.area.x,disableOutOfBounds(this.content.children,this,this.vertical)}};var disableOutOfBounds=function(a,b,c){"use strict";if(void 0!==a)for(var d=0;d<a.length;d++){var e=a[d];e.inputEnabled=!0;var f,g,h=e.world||e;c?(f=h.y,g=b.content.area.y):(f=h.x,g=b.content.area.x),f<g&&(e.inputEnabled=!1),disableOutOfBounds(e.children,b,c)}},Phaser,uiWidgets=uiWidgets||{};uiWidgets.Viewport=function(a,b,c,d,e){"use strict";Phaser.Group.call(this,a),a.add.existing(this),this.x=b,this.y=c,this.area={x:b,y:c,width:d,height:e},this.mask=this.game.add.graphics(this.area.x,this.area.y),this.mask.beginFill(255),this.mask.drawRect(0,0,d,e),this.mask.endFill()},uiWidgets.Viewport.prototype=Object.create(Phaser.Group.prototype),uiWidgets.Viewport.constructor=uiWidgets.Viewport,uiWidgets.Viewport.prototype.addNode=function(a){"use strict";this.add(a)};